<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.1/styles/default.min.css">
  </head>
  <body>
    <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/IDSNlogo.png" width="200" height="200">
    <h1>Hands-on Lab : Views in PostgreSQL</h1>
    <p><strong>Estimated time needed:</strong> 15 minutes</p>
    <p>In this lab, you will learn how to create and execute views and materialized views in the PostgreSQL database service using the pgAdmin graphical user interface (GUI) tool.</p>
    <h1></h1>
    <h2>Software Used in this Lab</h2>
    <p>In this lab, you will use <a href="https://www.postgresql.org/">PostgreSQL Database</a>. PostgreSQL is a Relational Database Management System (RDBMS) designed to efficiently store, manipulate, and retrieve the data.</p>
    <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/postgresql.png" width="130" height="100">
    <p></p>
    <p>To complete this lab you will utilize PostgreSQL relational database service available as part of IBM Skills Network Labs (SN Labs) Cloud IDE. SN Labs is a virtual lab environment used in this course.</p>
    <h1></h1>
    <h2>Database Used in this Lab</h2>
    <p>The eBooks database has been used in this lab.</p>
    <p>The following ERD diagram shows the schema of the complete eBooks database used in this lab:</p>
    <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/datasets/eBooks/eBooks_schema_complete.png" width="630" height="500">
    <h1></h1>
    <h2>Objectives</h2>
    <p>After completing this lab, you will be able to use pgAdmin with PostgreSQL to:</p>
    <ul>
      <li>Restore a database schema and data.</li>
      <li>Create and execute a view.</li>
      <li>Create and execute a materialized view.</li>
    </ul>
    <h1></h1>
    <h2>Exercise</h2>
    <p>In this exercise through different tasks, you will learn how to create and execute views and materialized views in the PostgreSQL database service using the pgAdmin graphical user interface (GUI) tool.</p>
    <h1></h1>
    <h3>Task A: Restore a database schema and data</h3>
    <ol>
      <li>
        <p>Download the <strong>eBooks</strong> PostgreSQL dump file (containing the eBooks database schema and data) below to your local computer storage.</p>
        <ul>
          <li><a href="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/datasets/eBooks/eBooks_pgsql_dump.tar" target="_blank" rel="external">eBooks_pgsql_dump.tar</a></li>
        </ul>
      </li>
    </ol><br>
    <ol start="2">
      <li>
        <p>Go to <strong>Terminal > New Terminal</strong> to open a terminal from the side by side launched Cloud IDE.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.2.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="3">
      <li>
        <p>Start a PostgreSQL service session in the Cloud IDE using the command below in the terminal. Find your PostgreSQL service session password from the highlighted location of the terminal shown in the image below. Note down your PostgreSQL service session password because you may need to use it later in the lab.</p>
        <pre><code class="hljs language-ebnf"><span class="hljs-attribute">start_postgres</span>
</code></pre>
        <p></p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.3.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="4">
      <li>
        <p>Copy your pgAdmin weblink from the highlighted location of the terminal shown in the image below and paste it to a new tab of your web browser.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.4.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="5">
      <li>
        <p>You will see the pgAdmin GUI tool.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.5.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="6">
      <li>
        <p>In the tree-view, expand <strong>Servers</strong> > <strong>postgres</strong> > <strong>Databases</strong>. Enter your PostgreSQL service session password if prompted during the process. Right-click on <strong>Databases</strong> and go to <strong>Create > Database</strong>. Type <strong>eBooks</strong> as name of the database and click <strong>Save</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.6.1.png" alt="image">
        </p>
        <p></p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.6.2.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="7">
      <li>
        <p>In the tree-view, expand <strong>eBooks</strong>. Right-click on <strong>eBooks</strong> and select <strong>Restore</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.7.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="8">
      <li>
        <p>Follow the instructions below to restore and proceed to Task B:</p>
        <ul>
          <li>
            <p>On the <strong>General</strong> tab, click on the <strong>Select file</strong> button by the Filename box.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.1.png" alt="image">
            </p>
          </li>
          <li>
            <p>Click the <strong>Upload File</strong> button.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.2.png" alt="image">
            </p>
          </li>
          <li>
            <p>Double-click on the drop files area and load the <strong>eBooks_pgsql_dump.tar</strong> you downloaded earlier from your local computer storage.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.3.png" alt="image">
            </p>
          </li>
          <li>
            <p>When the upload is complete, close the drop files area by clicking the <strong>X</strong> button.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.4.png" alt="image">
            </p>
          </li>
          <li>
            <p>Make sure Format is set to <strong>All Files</strong>, select the uploaded <strong>eBooks_pgsql_dump.tar</strong> file from the list, and then click the <strong>Select</strong> button.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.5.png" alt="image">
            </p>
          </li>
          <li>
            <p>Now switch to <strong>Restore options</strong> tab.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.6.png" alt="image">
            </p>
          </li>
          <li>
            <p>Under Disable, set the Trigger option to <strong>Yes</strong>. Then click <strong>Restore</strong> button.</p>
            <p>
              <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/1.8.7.png" alt="image">
            </p>
          </li>
        </ul>
      </li>
    </ol>
    <h1></h1>
    <h3>Task B: Create and execute a view</h3>
    <ol>
      <li>
        <p>In the tree-view, expand <strong>eBooks > Schemas > public</strong>. Right-click on <strong>Views</strong> and go to <strong>Create > View</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/2.1.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="2">
      <li>
        <p>On the <strong>General</strong> tab, type <strong>publisher_and_rating_view</strong> as name of the view. Then switch to <strong>Code</strong> tab.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/2.2.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="3">
      <li>
        <p>On the <strong>Code</strong> tab, copy and paste the code below. Then click <strong>Save</strong>.</p>
        <pre><code class="hljs language-n1ql"><span class="hljs-keyword">SELECT</span> books.<span class="hljs-built_in">title</span>, books.rating, publishers.name 
<span class="hljs-keyword">FROM</span> books <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> publishers <span class="hljs-keyword">ON</span> books.publisher_id = publishers.publisher_id
</code></pre>
        <p></p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/2.3.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="4">
      <li>
        <p>In the tree-view, expand <strong>Views</strong>. Right-click on <strong>publisher_and_rating_view</strong> and go to <strong>View/Edit Data > All Rows</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/2.4.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="5">
      <li>
        <p>You will access the view you created. Proceed to Task C.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/2.5.png" alt="image">
        </p>
      </li>
    </ol><br>
    <h1></h1>
    <h3>Task C: Create and execute a materialized view</h3>
    <ol>
      <li>
        <p>In the tree-view, expand <strong>eBooks > Schemas > public</strong>. Right-click on <strong>Materialized Views</strong> and go to <strong>Create > Materialized View</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/3.1.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="2">
      <li>
        <p>On the <strong>General</strong> tab, type <strong>publisher_and_rating_materialized_view</strong> as name of the view. Then switch to the <strong>Definition</strong> tab.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/3.2.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="3">
      <li>
        <p>On the <strong>Definition</strong> tab, copy and paste the code below. Then click <strong>Save</strong>.</p>
        <pre><code class="hljs language-n1ql"><span class="hljs-keyword">SELECT</span> books.<span class="hljs-built_in">title</span>, books.rating, publishers.name 
<span class="hljs-keyword">FROM</span> books <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> publishers <span class="hljs-keyword">ON</span> books.publisher_id = publishers.publisher_id
</code></pre>
        <p></p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/3.3.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="4">
      <li>
        <p>In the tree-view, expand <strong>Materialized Views</strong>. Right-click on <strong>publisher_and_rating_materialized_view</strong> and go to <strong>Refresh View > With data</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/3.4.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="5">
      <li>
        <p>Right-click on <strong>publisher_and_rating_materialized_view</strong> again and go to <strong>View/Edit Data > All Rows</strong>.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/3.5.png" alt="image">
        </p>
      </li>
    </ol><br>
    <ol start="6">
      <li>
        <p>You will access the materialized view you created.</p>
        <p>
          <img src="https://cf-courses-data.s3.us.cloud-object-storage.appdomain.cloud/IBM-DB0110EN-SkillsNetwork/labs/Lab%20-%20Views%20in%20PostgreSQL/images/3.6.png" alt="image">
        </p>
      </li>
    </ol><br>
    <h1></h1>
    <h3>Congratulations! You have completed this lab, and you are ready for the next topic.</h3>
    <h3><br></h3>
    <h2>Author(s)</h2>
    <ul>
      <li><a href="https://www.linkedin.com/in/sandipsahajoy/?utm_email=Email&#x26;utm_source=Nurture&#x26;utm_content=000026UJ&#x26;utm_term=10006555&#x26;utm_campaign=PLACEHOLDER&#x26;utm_id=SkillsNetwork-Courses-IBM-DB0110EN-SkillsNetwork-24601058" target="_blank" rel="external">Sandip Saha Joy</a></li>
    </ul>
    <h2>Other Contributor(s)</h2>
    <ul>
      <li></li>
    </ul>
    <h2>Changelog</h2>
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Version</th>
          <th>Changed by</th>
          <th>Change Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>2021-03-25</td>
          <td>1.0</td>
          <td>Sandip Saha Joy</td>
          <td>Created initial version</td>
        </tr>
      </tbody>
    </table>
    <h2></h2>
    <h3 align="center">© IBM Corporation 2021. All rights reserved.</h3>
    <h3></h3>
    <script>window.addEventListener('load', function() {
snFaculty.inject();
});</script>
    <script src="https://skills-network-assets.s3.us.cloud-object-storage.appdomain.cloud/scripts/inject.11b2a82f.js"></script>
    <script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.1/highlight.min.js"></script>
    <script src="https://unpkg.com/highlightjs-badge@0.1.9/highlightjs-badge.min.js"></script>
  </body>
</html>
